{"remainingRequest":"/Users/anirudhchinta/drishti/Frontend/node_modules/thread-loader/dist/cjs.js!/Users/anirudhchinta/drishti/Frontend/node_modules/babel-loader/lib/index.js!/Users/anirudhchinta/drishti/Frontend/node_modules/ts-loader/index.js??ref--15-3!/Users/anirudhchinta/drishti/Frontend/node_modules/eslint-loader/index.js??ref--14-0!/Users/anirudhchinta/drishti/Frontend/src/store/index.ts","dependencies":[{"path":"/Users/anirudhchinta/drishti/Frontend/src/store/index.ts","mtime":1727631613577},{"path":"/Users/anirudhchinta/drishti/Frontend/babel.config.js","mtime":1727631613560},{"path":"/Users/anirudhchinta/drishti/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anirudhchinta/drishti/Frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anirudhchinta/drishti/Frontend/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/anirudhchinta/drishti/Frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/anirudhchinta/drishti/Frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCwgeyBTdG9yZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgY2xpZW50IGZyb20gJy4vY2xpZW50JzsKVnVlLnVzZShWdWV4KTsKY29uc3QgTk9USUZJQ0FUSU9OX0RVUiA9IDUwMDA7CmV4cG9ydCBkZWZhdWx0IG5ldyBTdG9yZSh7CiAgc3RhdGU6IHsKICAgIGlkOiBudWxsLAogICAgaXNMb2FkaW5nOiB0cnVlLAogICAgdXNlcm5hbWU6IG51bGwsCiAgICBjbGllbnQKICB9LAogIG11dGF0aW9uczogewogICAgc2V0TG9hZGluZyhzdGF0ZSwgaXNMb2FkaW5nID0gdHJ1ZSkgewogICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBpc0xvYWRpbmc7CiAgICB9LAogICAgc2V0VXNlcihzdGF0ZSwgdXNlcikgewogICAgICB2YXIgX3VzZXIkdXNlcm5hbWUsIF91c2VyJF9pZDsKICAgICAgc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgIHN0YXRlLnVzZXJuYW1lID0gKF91c2VyJHVzZXJuYW1lID0gdXNlciA9PT0gbnVsbCB8fCB1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1c2VyLnVzZXJuYW1lKSAhPT0gbnVsbCAmJiBfdXNlciR1c2VybmFtZSAhPT0gdm9pZCAwID8gX3VzZXIkdXNlcm5hbWUgOiBudWxsOwogICAgICBzdGF0ZS5pZCA9IChfdXNlciRfaWQgPSB1c2VyID09PSBudWxsIHx8IHVzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVzZXIuX2lkKSAhPT0gbnVsbCAmJiBfdXNlciRfaWQgIT09IHZvaWQgMCA/IF91c2VyJF9pZCA6IG51bGw7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBpc0xvZ2dlZGluKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VybmFtZSAhPT0gbnVsbDsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8vIExvZyBpbiBlaXRoZXIgdXNpbmcgdGhlIGdpdmVuIGVtYWlsL3Bhc3N3b3JkIG9yIHRoZSB0b2tlbiBmcm9tIHN0b3JhZ2UKICAgIGFzeW5jIGxvZ2luKHsKICAgICAgY29tbWl0CiAgICB9LCBjcmVkZW50aWFscykgewogICAgICB0cnkgewogICAgICAgIGlmICghY3JlZGVudGlhbHMpIHsKICAgICAgICAgIC8vIFRyeSB0byBhdXRoZW50aWNhdGUgdXNpbmcgYW4gZXhpc3RpbmcgdG9rZW4KICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgdXNlcgogICAgICAgICAgfSA9IGF3YWl0IGNsaWVudC5yZUF1dGhlbnRpY2F0ZSgpOwogICAgICAgICAgY29tbWl0KCdzZXRVc2VyJywgdXNlcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycpOwogICAgICAgICAgLy8gT3RoZXJ3aXNlIGxvZyBpbiB3aXRoIHRoZSBgbG9jYWxgIHN0cmF0ZWd5IHVzaW5nIHRoZSBjcmVkZW50aWFscyB3ZSBnb3QKICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgdXNlcgogICAgICAgICAgfSA9IGF3YWl0IGNsaWVudC5hdXRoZW50aWNhdGUoewogICAgICAgICAgICBzdHJhdGVneTogJ2xvY2FsJywKICAgICAgICAgICAgLi4uY3JlZGVudGlhbHMKICAgICAgICAgIH0pOwogICAgICAgICAgLy8gTWFrZSBzdXJlIGF1dGggcG9wdXAgaXMgZGlzbWlzc2VkIGJlZm9yZSBzd2l0Y2hpbmcgdG8gbG9nZ2VkIGluIHN0YXRlCiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGNvbW1pdCgnc2V0VXNlcicsIHVzZXIpLCAxMDApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBpZiAoY3JlZGVudGlhbHMpIHsKICAgICAgICAgIGNvbW1pdCgnc2V0VXNlcicsIG51bGwpOwogICAgICAgICAgVnVlLm5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAnRmFpbGVkIHRvIGxvZ2luJywKICAgICAgICAgICAgdGV4dDogZXJyb3IubWVzc2FnZSwKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgZHVyYXRpb246IE5PVElGSUNBVElPTl9EVVIKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vIGNyZWF0ZSBhY2NvdW50IHdpdGggb3RwCiAgICBhc3luYyBzaWdudXAoewogICAgICBjb21taXQKICAgIH0sIHsKICAgICAgY3JlZGVudGlhbHMsCiAgICAgIG90cAogICAgfSkgewogICAgICBjb21taXQoJ3NldExvYWRpbmcnKTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgY2xpZW50LnNlcnZpY2UoJ3VzZXJzJykuY3JlYXRlKGNyZWRlbnRpYWxzLCB7CiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBvdHAKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAvLyBNYWtlIHN1cmUgYXV0aCBwb3B1cCBpcyBkaXNtaXNzZWQgYmVmb3JlIHN3aXRjaGluZyB0byBsb2dnZWQgaW4gc3RhdGUKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGNvbW1pdCgnc2V0VXNlcicsIHVzZXIpLCAxMDApOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIGNvbW1pdCgnc2V0VXNlcicsIG51bGwpOwogICAgICAgIFZ1ZS5ub3RpZnkoewogICAgICAgICAgdGl0bGU6ICdGYWlsZWQgdG8gc2lnbiB1cCcsCiAgICAgICAgICB0ZXh0OiBlcnJvci5tZXNzYWdlLAogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIGR1cmF0aW9uOiBOT1RJRklDQVRJT05fRFVSCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgbG9nb3V0KHsKICAgICAgY29tbWl0CiAgICB9KSB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgY2xpZW50LmxvZ291dCgpOwogICAgICAgIC8vIE1ha2Ugc3VyZSBhdXRoIHBvcHVwIGlzIGRpc21pc3NlZCBiZWZvcmUgc3dpdGNoaW5nIHRvIGxvZ2dlZCBvdXQgc3RhdGUKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGNvbW1pdCgnc2V0VXNlcicsIG51bGwpLCAxMDApOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIFZ1ZS5ub3RpZnkoewogICAgICAgICAgdGl0bGU6ICdGYWlsZWQgdG8gbG9nb3V0JywKICAgICAgICAgIHRleHQ6IGVycm9yLm1lc3NhZ2UsCiAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgZHVyYXRpb246IE5PVElGSUNBVElPTl9EVVIKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBjaGFuZ2VQYXNzd29yZCh7CiAgICAgIHN0YXRlLAogICAgICBkaXNwYXRjaAogICAgfSwgcGFzc3dvcmQpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgX3N0YXRlJHVzZXJuYW1lOwogICAgICAgIGNvbnN0IHVzZXJuYW1lID0gKF9zdGF0ZSR1c2VybmFtZSA9IHN0YXRlLnVzZXJuYW1lKSAhPT0gbnVsbCAmJiBfc3RhdGUkdXNlcm5hbWUgIT09IHZvaWQgMCA/IF9zdGF0ZSR1c2VybmFtZSA6ICcnOwogICAgICAgIGF3YWl0IGNsaWVudC5zZXJ2aWNlKCd1c2VycycpLnVwZGF0ZShzdGF0ZS5pZCwgewogICAgICAgICAgdXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZAogICAgICAgIH0pOwogICAgICAgIGF3YWl0IGRpc3BhdGNoKCdsb2dpbicsIHsKICAgICAgICAgIHVzZXJuYW1lLAogICAgICAgICAgcGFzc3dvcmQKICAgICAgICB9KTsKICAgICAgICBWdWUubm90aWZ5KCdTdWNlc2Z1bGx5IGNoYW5nZWQgcGFzc3dvcmQnKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgVnVlLm5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogJ0ZhaWxlZCB0byBjaGFuZ2UgcGFzc3dvcmQnLAogICAgICAgICAgdGV4dDogZS5tZXNzYWdlLAogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIGR1cmF0aW9uOiBOT1RJRklDQVRJT05fRFVSCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgfQp9KTs="},{"version":3,"names":["Vue","Vuex","Store","client","use","NOTIFICATION_DUR","state","id","isLoading","username","mutations","setLoading","setUser","user","_user$username","_user$_id","_id","getters","isLoggedin","actions","login","commit","credentials","reAuthenticate","authenticate","strategy","setTimeout","error","notify","title","text","message","type","duration","signup","otp","service","create","query","console","logout","changePassword","dispatch","password","_state$username","update","e"],"sources":["/Users/anirudhchinta/drishti/Frontend/node_modules/eslint-loader/index.js??ref--14-0!/Users/anirudhchinta/drishti/Frontend/src/store/index.ts"],"sourcesContent":["import Vue from 'vue';\nimport Vuex, { Store } from 'vuex';\n\nimport client from './client';\n\nVue.use(Vuex);\n\nconst NOTIFICATION_DUR = 5000;\n\ninterface User {\n  _id: string;\n  username: string;\n}\n\ninterface AuthState {\n  id: string | null;\n  username: string | null;\n  isLoading: boolean;\n  client: typeof client;\n}\n\nexport default new Store<AuthState>({\n  state: {\n    id: null,\n    isLoading: true,\n    username: null,\n    client\n  },\n  mutations: {\n    setLoading(state, isLoading = true) {\n      state.isLoading = isLoading;\n    },\n    setUser(state, user: User | null) {\n      state.isLoading = false;\n      state.username = user?.username ?? null;\n      state.id = user?._id ?? null;\n    }\n  },\n  getters: {\n    isLoggedin(state) {\n      return state.username !== null;\n    }\n  },\n  actions: {\n    // Log in either using the given email/password or the token from storage\n    async login({ commit }, credentials?: Credentials) {\n      try {\n        if (!credentials) {\n          // Try to authenticate using an existing token\n          const { user } = await client.reAuthenticate();\n          commit('setUser', user);\n        } else {\n          commit('setLoading');\n          // Otherwise log in with the `local` strategy using the credentials we got\n          const { user } = await client.authenticate({\n            strategy: 'local',\n            ...credentials\n          });\n          // Make sure auth popup is dismissed before switching to logged in state\n          setTimeout(() => commit('setUser', user), 100);\n        }\n        return true;\n      } catch (error) {\n        if (credentials) {\n          commit('setUser', null);\n          Vue.notify({\n            title: 'Failed to login',\n            text: error.message,\n            type: 'error',\n            duration: NOTIFICATION_DUR\n          });\n        } else {\n          commit('setLoading', false);\n        }\n        return false;\n      }\n    },\n\n    // create account with otp\n    async signup({ commit }, { credentials, otp }: SignUpPayload) {\n      commit('setLoading');\n      try {\n        const user = await client.service('users').create(credentials, {\n          query: { otp }\n        });\n        // Make sure auth popup is dismissed before switching to logged in state\n        setTimeout(() => commit('setUser', user), 100);\n        return true;\n      } catch (error) {\n        console.error(error);\n        commit('setUser', null);\n        Vue.notify({\n          title: 'Failed to sign up',\n          text: error.message,\n          type: 'error',\n          duration: NOTIFICATION_DUR\n        });\n        return false;\n      }\n    },\n\n    async logout({ commit }) {\n      try {\n        await client.logout();\n        // Make sure auth popup is dismissed before switching to logged out state\n        setTimeout(() => commit('setUser', null), 100);\n        return true;\n      } catch (error) {\n        console.error(error);\n        Vue.notify({\n          title: 'Failed to logout',\n          text: error.message,\n          type: 'error',\n          duration: NOTIFICATION_DUR\n        });\n        return false;\n      }\n    },\n\n    async changePassword({ state, dispatch }, password: string) {\n      try {\n        const username = state.username ?? '';\n        await client.service('users').update(state.id, { username, password });\n        await dispatch('login', { username, password });\n        Vue.notify('Sucesfully changed password');\n        return true;\n      } catch (e) {\n        console.error(e);\n        Vue.notify({\n          title: 'Failed to change password',\n          text: e.message,\n          type: 'error',\n          duration: NOTIFICATION_DUR\n        });\n        return false;\n      }\n    }\n  }\n});\n"],"mappings":"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","ignoreList":[]}]}